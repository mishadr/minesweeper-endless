<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Minesweeper endless</title>

  <link rel="stylesheet" type="text/css" href="css/styles.css">

</head>
<body>

<div class="all-panel">

  <div class="control-panel">
    <div class="menu-panel">
      <button id="parameters" style="grid-column: 1 / 3;">Change parameters</button>
      <button id="new-game">New game</button>
      <button id="pause" disabled>Pause</button>
    </div>

    <div class="info-panel">
      <label class="info" id="status">Status: play</label>
      <label class="info" id="mode">Mode: endless</label>
      <label class="info" id="density" hidden>Density:</label>
      <label class="info" id="bombs" hidden>Bombs:</label>
      <label class="info" id="opens">Open: 0</label>
      <label class="info" id="flags">Flag: 0</label>
<!--      <label class="info" id="dies">Dies: 0</label>-->
<!--      <label class="info" id="best">Best score: 0</label>-->
      <label class="info" id="time">Time: 0</label>

    </div>

  </div>

  <div class="game-panel">
<!--    <label style="align-self: center; font-size: 20px">Minesweeper endless</label>-->

    <div class="game-box">
<!--      <svg id="svg"  xmlns="http://www.w3.org/2000/svg"></svg>-->
      <canvas id="canvas"></canvas>
    </div>

    <div class="pause">
      <label style="vertical-align: middle; user-select: none; font-size: 100px; line-height: 300px;
       color: #898989;" id="label-pause">PAUSED</label>

      <div id="pause-parameters">

        <label style="align-self: center">Game parameters</label>
        <table>
          <tr>
            <td>
              <label>Beginner
                <input type="radio" name="mode" value="beginner">
              </label>
            </td>
            <td>
              <label>9 x 9 field, 10 bombs</label>
            </td>
          </tr>
          <tr>
            <td>
              <label>Intermediate<input type="radio" name="mode" value="intermediate"></label>
            </td>
            <td>
              <label>16 x 16 field, 40 bombs</label>
            </td>
          </tr>
          <tr>
            <td>
              <label>Expert
                <input type="radio" name="mode" value="expert">
              </label>
            </td>
            <td>
              <label>16 x 30 field, 99 bombs</label>
            </td>
          </tr>
          <tr>
            <td>
              <label>Endless
                <input type="radio" name="mode" value="endless">
              </label>
            </td>
            <td>
              <label for="range-density" id="label-density">Density: 0.19
              </label>
            </td>
          </tr>
          <tr>
            <td></td>
            <td>
              <input type="range" step="0.001" min="0.100" max="0.250" id="range-density">
            </td>
          </tr>
        </table>
        <div class="buttons">
          <button class="button-cancel">Cancel</button>
          <button class="button-new">Begin new game</button>
        </div>

      </div>
    </div>

    <div class="finish">
      <label style="vertical-align: middle; user-select: none; font-size: 80px; line-height: 200px;
       color: #898989;" id="label-finish"></label>
      <div id="div-finish">
        <div id="finish-table">
          <!--        generated stats-->
        </div>
        <div class="buttons">
          <button class="button-back">Back to game</button>
          <button class="button-new">Try again</button>
        </div>
      </div>

    </div>

  </div>

  <div class="help-panel">
    <label class="info"><b>Help</b></label>
    <p>
      Rules are classic. The task is to open cells without mines. Initially all cells are hidden. Left click opens a cell. If open a cell with the mine you loose. A number in a cell tells the number of mines in 8 neighbor cells.
    </p>
    <p>
      Right click puts a flag. If a number of flags around a cell is equal to a number in it, double click will open all the rest hidden cells in the neighborhood. Note, it is not safe if flags are put not correctly.
    </p>
    <p>
      In the Endless mode the field is not bounded so game can continue endlessly.
    </p>
  </div>

</div>

<script src="js/libs/jquery-3.6.0.js"></script>

<script src="js/utils.js"></script>
<script src="js/drawer.js"></script>
<script src="js/game.js"></script>
<script src="js/parameters.js"></script>
<script src="js/controller.js"></script>
<script>
    // let img = new Image()
    // img.crossOrigin = "anonymous"
    // img.src = "assets/hidden.png"
    // console.log("1")
    //
    // let ctx = document.getElementById("canvas").getContext("2d")
    //
    // img.onload = () => {
    //     console.log("loaded img", img.src)
    //     ctx.drawImage(img, 0, 0)
    //
    //     let c = ctx.getImageData(0, 0, 10, 10)
    // }

    // var folder = "assets/";
    // $.ajax({
    //     url : folder,
    //     success: function (data) {
    //         console.log(data)
    //     }
    // });

    new Controller()
  // let canvas = document.getElementById("canvas")
  // const ctx = canvas.getContext('2d');
  // let width = 500
  // let height = 500
  // // ctx.canvas.width = width
  // // ctx.canvas.height = height
  // // ctx.translate(400, 100)
  // ctx.fillRect(25, 25, 100, 100)
  // const img = new Image();   // Create new img element
  // img.src = 'assets/hidden.png'; // Set source path
  // img.onload = () => {
  //     for (let i=0; i<60; ++i)
  //         for (let j=0; j<60; ++j) {
  //             ctx.drawImage(img, 20*i, 20*j)
  //         }
  // }

</script>

</body>
</html>